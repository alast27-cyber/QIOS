<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHIPS Protocol Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #111827;
            --panel-bg-color: rgba(31, 41, 55, 0.5);
            --border-color: rgba(56, 189, 248, 0.2);
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --accent-cyan: #00f2ea;
            --accent-blue: #3b82f6;
            --accent-red: #f43f5e;
            --accent-green: #34d399;
            --accent-purple: #a78bfa;
            --font-family: 'Poppins', sans-serif;
        }

        *, *::before, *::after { box-sizing: border-box; }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            background-image: 
                url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"%3E%3Cg fill-rule="evenodd"%3E%3Cg fill="%231f2937" fill-opacity="0.4"%3E%3Cpath opacity=".5" d="M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z"/%3E%3Cpath d="M6 5V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h5v1h-5v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4H6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6v-4H0v-1h6V6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V0h1v6h4V6h1v-1h-1V0h-1v5h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-4v1h4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4H7v-4H6v-1h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-4h1v4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4v-1h-4v-4h4V6h1V5h-1v1h-4v4h4v1h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4h-1v-4h-4v4H6v-4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v1h1v4H5v-1h-1v-4H0v-1h5v-4H0v-1h5v-4H0v-1h5v-4H0v-1h5v-4H0v-1h5v-4H0v-1h5v-4H0v-1h5v-4H0v-1h5v-4H0v-1h5v-4H0V6h1V5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5h4V0h1v5Z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E'),
                radial-gradient(circle at 15% 15%, rgba(56, 189, 248, 0.15) 0%, transparent 35%),
                radial-gradient(circle at 85% 75%, rgba(0, 242, 234, 0.1) 0%, transparent 40%);
            color: var(--text-primary);
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .admin-panel {
            width: 1400px;
            max-width: 95%;
            background: rgba(31, 41, 55, 0.2);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            padding: 2rem;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: auto;
            gap: 1.5rem;
            grid-template-areas:
                "header header header header header header header header header header header header"
                "stats stats stats stats stats stats stats stats stats stats stats stats"
                "ai ai ai ai entangle entangle entangle entangle qsim qsim qsim qsim"
                "ai ai ai ai entangle entangle entangle entangle log log log log"
                "training training training training stress stress stress stress log log log log";
        }

        .panel {
            background: var(--panel-bg-color);
            border: 1px solid rgba(56, 189, 248, 0.1);
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: inset 0 1px 2px 0 rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
        }
        
        .panel-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin: 0 0 1rem 0;
        }

        /* Grid Area Assignments */
        #header { grid-area: header; background: none; border: none; padding: 0; box-shadow: none; }
        #stats-container { grid-area: stats; display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; padding: 0 !important; background: none !important; border: none !important; box-shadow: none !important; }
        #ai-status { grid-area: ai; }
        #entanglement { grid-area: entangle; }
        #q-sim { grid-area: qsim; }
        #training { grid-area: training; }
        #stress { grid-area: stress; }
        #log { grid-area: log; }

        /* Header */
        #header h1 { margin: 0; font-size: 1.8rem; font-weight: 600; color: var(--text-primary); }
        #header p { margin: 0; color: var(--text-secondary); }

        /* Stats Card */
        .stat-card { background: var(--panel-bg-color); border: 1px solid rgba(56, 189, 248, 0.1); border-radius: 12px; padding: 1.25rem; display: grid; grid-template-columns: 1fr auto; grid-template-rows: auto auto auto; gap: 0.25rem 1rem; }
        .stat-card-title { grid-column: 1 / 2; color: var(--text-secondary); font-size: 1rem; }
        .stat-card-main { grid-column: 1 / 2; display: flex; align-items: baseline; gap: 0.5rem; }
        .stat-card-value { font-size: 1.75rem; font-weight: 600; color: var(--text-primary); line-height: 1; }
        .stat-card-subtitle { font-size: 0.8rem; color: var(--text-secondary); }
        .stat-card-index { grid-column: 2 / 3; grid-row: 1 / 4; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.2); border-radius: 8px; padding: 0 1rem; font-size: 1.25rem; font-weight: 600; }
        .progress-bar { grid-column: 1 / 3; height: 4px; background: rgba(0, 0, 0, 0.3); border-radius: 2px; margin-top: 0.5rem; overflow: hidden; }
        .progress-bar-inner { height: 100%; width: 50%; border-radius: 2px; transition: width 0.5s ease-in-out, background-color 0.5s ease; }

        /* AI Status Panel */
        .toggle-group { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .toggle-label { font-size: 1rem; }
        .toggle-switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #374151; transition: .4s; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--accent-blue); }
        input:checked + .slider:before { transform: translateX(20px); }

        .progress-circle-container { display: flex; flex-direction: column; align-items: center; justify-content: center; flex-grow: 1; }
        .progress-circle { position: relative; width: 120px; height: 120px; }
        .progress-circle-bg, .progress-circle-fg { fill: none; stroke-width: 10; }
        .progress-circle-bg { stroke: rgba(0, 0, 0, 0.3); }
        .progress-circle-fg { stroke: var(--accent-cyan); stroke-linecap: round; transform-origin: 50% 50%; transform: rotate(-90deg); transition: stroke-dashoffset 0.5s ease-in-out; filter: drop-shadow(0 0 5px var(--accent-cyan)); }
        .progress-circle-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.8rem; font-weight: 600; color: var(--text-primary); }
        .progress-circle-label { text-align: center; color: var(--text-secondary); font-size: 0.9rem; margin-top: 1rem; }

        /* Entanglement Panel */
        #entanglement-viz { display: flex; flex-grow: 1; flex-direction: column; justify-content: center; align-items: center; }
        #entanglement-svg { width: 100%; height: 100px; }
        #entanglement-path { stroke: url(#wave-gradient); stroke-width: 3; fill: none; filter: drop-shadow(0 0 8px var(--accent-cyan)); }
        .data-stream-circle { fill: var(--bg-color); stroke: var(--accent-cyan); stroke-width: 2; filter: drop-shadow(0 0 5px var(--accent-cyan)); }
        .data-stream-text { fill: var(--text-primary); font-size: 24px; font-weight: 600; text-anchor: middle; alignment-baseline: middle; }
        .entanglement-buttons { display: flex; gap: 1rem; margin-top: 1rem; width: 100%; }
        
        /* General Button & Input Styles */
        .btn { background: linear-gradient(145deg, #4f5b78, #2a3349); color: var(--text-primary); border: 1px solid rgba(255,255,255,0.1); padding: 0.6rem 1.2rem; border-radius: 8px; font-weight: 500; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); filter: brightness(1.2); }
        .btn.primary { background: linear-gradient(145deg, var(--accent-blue), #2563eb); }
        .btn.danger { background: linear-gradient(145deg, var(--accent-red), #be123c); }
        
        .input-field, .textarea-field { width: 100%; background: #111827; border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 8px; padding: 0.6rem; font-family: var(--font-family); }
        .textarea-field { resize: none; flex-grow: 1; font-size: 0.8rem; line-height: 1.6; }
        
        /* Q Sim Panel */
        .q-sim-item { margin-bottom: 1.5rem; }
        .q-sim-item-header { display: flex; justify-content: space-between; align-items: center; }
        .q-sim-item-title { margin: 0; color: var(--text-primary); font-weight: 500; }
        .q-sim-item-subtitle { margin: 0; font-size: 0.8rem; color: var(--text-secondary); }
        .q-sim-item-value { font-size: 1.2rem; color: var(--text-primary); font-weight: 500; }
        
        /* Simulation Log */
        #simulation-log-list { list-style: none; padding: 0; margin: 0; flex-grow: 1; overflow-y: auto; font-size: 0.9rem; }
        #simulation-log-list li { display: flex; align-items: center; margin-bottom: 0.75rem; opacity: 0; transform: translateX(20px); animation: fadeIn 0.5s forwards; }
        #simulation-log-list li .checkbox { width: 16px; height: 16px; margin-right: 0.75rem; border: 2px solid; border-radius: 4px; display: flex; align-items: center; justify-content: center; }
        #simulation-log-list li .checkbox svg { width: 10px; height: 10px; stroke-width: 3; stroke: var(--text-primary); }
        #simulation-log-list li.success { color: var(--accent-green); } #simulation-log-list li.success .checkbox { border-color: var(--accent-green); }
        #simulation-log-list li.failed { color: var(--accent-red); } #simulation-log-list li.failed .checkbox { border-color: var(--accent-red); }
        #simulation-log-list li.pending { color: var(--accent-purple); } #simulation-log-list li.pending .checkbox { border-color: var(--accent-purple); }
        #simulation-log-list li.info { color: var(--accent-blue); } #simulation-log-list li.info .checkbox { border-color: var(--accent-blue); }

        @keyframes fadeIn { to { opacity: 1; transform: translateX(0); } }
        @keyframes wave { 0% { d: path("M 0 50 Q 75 0, 150 50 T 300 50"); } 50% { d: path("M 0 50 Q 75 100, 150 50 T 300 50"); } 100% { d: path("M 0 50 Q 75 0, 150 50 T 300 50"); } }
        #entanglement-path.wavy { animation: wave 2s linear infinite; }
    </style>
</head>
<body>

    <div class="admin-panel">
        <div id="header">
            <h1>CHIPS Protocol Admin Panel</h1>
            <p>The back office for AI and browser management</p>
        </div>

        <div id="stats-container">
            <div class="stat-card">
                <div class="stat-card-title">Current Phase</div>
                <div class="stat-card-main">
                    <span id="stat-phase-value" class="stat-card-value">1</span>
                    <span id="stat-phase-subtitle" class="stat-card-subtitle">Scenitas test.6(b)</span>
                </div>
                <div class="stat-card-index" style="color: var(--accent-green);">1.12</div>
                <div class="progress-bar"><div id="stat-phase-progress" class="progress-bar-inner" style="background: var(--accent-green);"></div></div>
            </div>
            <div class="stat-card">
                <div class="stat-card-title">Treceability Score</div>
                 <div class="stat-card-main">
                    <span id="stat-trace-value" class="stat-card-value">100</span>
                    <span id="stat-trace-subtitle" class="stat-card-subtitle">Stenios best. 120</span>
                </div>
                <div class="stat-card-index" style="color: var(--accent-orange);">1.12</div>
                <div class="progress-bar"><div id="stat-trace-progress" class="progress-bar-inner" style="background: var(--accent-orange);"></div></div>
            </div>
            <div class="stat-card">
                <div class="stat-card-title">Contradiction Index</div>
                 <div class="stat-card-main">
                    <span id="stat-contra-value" class="stat-card-value">600</span>
                    <span id="stat-contra-subtitle" class="stat-card-subtitle">Senios oec. 600</span>
                </div>
                <div class="stat-card-index" style="color: var(--accent-red);">1.2</div>
                <div class="progress-bar"><div id="stat-contra-progress" class="progress-bar-inner" style="background: var(--accent-red);"></div></div>
            </div>
        </div>

        <div id="ai-status" class="panel">
            <h2 class="panel-title">AI Status & Progress</h2>
            <div class="toggle-group">
                <span class="toggle-label">Enable AI-Assisted Browsing</span>
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="toggle-group">
                <span class="toggle-label">Permissionless Data Access</span>
                 <label class="toggle-switch">
                    <input type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="progress-circle-container">
                <div class="progress-circle">
                    <svg viewBox="0 0 120 120" width="120" height="120">
                        <circle class="progress-circle-bg" cx="60" cy="60" r="50"></circle>
                        <circle id="sanitization-progress-fg" class="progress-circle-fg" cx="60" cy="60" r="50"></circle>
                    </svg>
                    <div id="sanitization-progress-text" class="progress-circle-text">95%</div>
                </div>
                <p class="progress-circle-label">Data Sanitization Rate</p>
            </div>
        </div>

        <div id="entanglement" class="panel">
            <h2 class="panel-title">Quantum Entanglement & Data Coherence</h2>
            <div id="entanglement-viz">
                <svg id="entanglement-svg" viewBox="0 0 300 100">
                    <defs>
                        <linearGradient id="wave-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#00f2ea;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path id="entanglement-path" d="M 0 50 Q 75 50, 150 50 T 300 50"></path>
                    <g>
                        <circle class="data-stream-circle" cx="75" cy="50" r="25"></circle>
                        <text id="data-stream-a" class="data-stream-text" x="75" y="50">42</text>
                    </g>
                    <g>
                        <circle class="data-stream-circle" cx="225" cy="50" r="25"></circle>
                        <text id="data-stream-b" class="data-stream-text" x="225" y="50">42</text>
                    </g>
                </svg>
            </div>
             <div class="entanglement-buttons">
                <button id="establish-link-btn" class="btn primary" style="width: 50%;">Establish Entangled Link</button>
                <button id="coherence-check-btn" class="btn" style="width: 50%;">Run Coherence Check</button>
            </div>
        </div>
        
        <div id="q-sim" class="panel">
            <h2 class="panel-title">Quantum Simulations</h2>
            <div class="q-sim-item">
                <div class="q-sim-item-header">
                    <div>
                        <p class="q-sim-item-title">Quantum Tunnelling Simulation</p>
                        <p class="q-sim-item-subtitle">Dest Santasion Rote</p>
                    </div>
                    <span id="tunnelling-rate" class="q-sim-item-value">95%</span>
                </div>
            </div>
             <div class="q-sim-item">
                 <div class="q-sim-item-header">
                    <div>
                        <p class="q-sim-item-title">Quantum Tunnelling Simulation</p>
                        <p class="q-sim-item-subtitle">Trinitios Protectiong</p>
                    </div>
                    <label class="toggle-switch" style="margin-left: 1rem;"><input type="checkbox" checked><span class="slider"></span></label>
                </div>
            </div>
            <button id="initiate-tunnel-btn" class="btn" style="margin-top: auto;">Initiate Tunnel</button>
        </div>
        
        <div id="training" class="panel">
             <h2 class="panel-title">Simulation & Training</h2>
             <textarea id="training-log" class="textarea-field" readonly>Initializing training environment...
Loading pre-trained Guardian AI model v1.12...
Compiling Q-Language libraries for protocol simulation...
Dataset loaded: 1.2M quantum circuit simulations.
Starting training epoch 1/100...</textarea>
        </div>

        <div id="stress" class="panel">
             <h2 class="panel-title">Integrity & Stress Testing</h2>
             <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0 0 1rem 0;">Inject Vals Data</p>
             <input type="text" class="input-field" placeholder="Enter AI lossene for Stream B">
             <button class="btn" style="align-self: flex-end;">Inject</button>
        </div>

        <div id="log" class="panel">
             <h2 class="panel-title">Simulation Log</h2>
             <ul id="simulation-log-list">
             </ul>
        </div>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM Element Selectors ---
        const elems = {
            phase: { val: document.getElementById('stat-phase-value'), prog: document.getElementById('stat-phase-progress') },
            trace: { val: document.getElementById('stat-trace-value'), prog: document.getElementById('stat-trace-progress') },
            contra: { val: document.getElementById('stat-contra-value'), prog: document.getElementById('stat-contra-progress') },
            sanitization: { fg: document.getElementById('sanitization-progress-fg'), text: document.getElementById('sanitization-progress-text') },
            entanglement: { path: document.getElementById('entanglement-path'), streamA: document.getElementById('data-stream-a'), streamB: document.getElementById('data-stream-b') },
            tunnellingRate: document.getElementById('tunnelling-rate'),
            trainingLog: document.getElementById('training-log'),
            simLogList: document.getElementById('simulation-log-list'),
            establishLinkBtn: document.getElementById('establish-link-btn')
        };

        // --- Simulation State ---
        let state = {
            traceability: 100,
            contradiction: 600,
            sanitizationRate: 95,
            entangled: false,
            logCounter: 0
        };

        const CIRCLE_CIRCUMFERENCE = 2 * Math.PI * 50;
        
        const logTemplates = [
            { type: 'success', text: 'Asewjen testload' },
            { type: 'success', text: 'Ansinse oetinatand' },
            { type: 'info', text: 'Praknia omoebrne 2 Dwnbtoas' },
            { type: 'success', text: 'AI engine generated' },
            { type: 'success', text: 'AI engine testload' },
            { type: 'info', text: 'Aswian lunean bwndeck' },
            { type: 'pending', text: 'Resolving cronesteck bias' },
            { type: 'failed', text: 'Alvaer oinest chsoot [FAILED]' },
            { type: 'success', text: 'Morphdotcker cleas' },
            { type: 'info', text: 'Seet Gerincoem Srovidam' }
        ];

        // --- Helper Functions ---
        const getRandom = (min, max) => Math.random() * (max - min) + min;

        const updateCircularProgress = (percent) => {
            const offset = CIRCLE_CIRCUMFERENCE - (percent / 100) * CIRCLE_CIRCUMFERENCE;
            elems.sanitization.fg.style.strokeDasharray = CIRCLE_CIRCUMFERENCE;
            elems.sanitization.fg.style.strokeDashoffset = offset;
            elems.sanitization.text.textContent = `${Math.round(percent)}%`;
        };

        const addLogEntry = (entry) => {
            const { type, text } = entry;
            const li = document.createElement('li');
            li.className = type;
            
            const checkSVG = `<svg viewBox="0 0 16 16"><path fill="none" d="M3.5 8.5l3 3l6-6"/></svg>`;

            li.innerHTML = `<div class="checkbox">${type === 'success' ? checkSVG : ''}</div><span>${text}</span>`;
            elems.simLogList.prepend(li);
            if (elems.simLogList.children.length > 9) {
                elems.simLogList.lastChild.remove();
            }
        };

        const updateTrainingLog = () => {
             const trainingMessages = [
                "Running backpropagation on Guardian AI model...",
                "Epoch 25/100 complete. Loss: 0.1345. Accuracy: 98.2%.",
                "Simulating quantum protocol for vulnerability analysis...",
                "Generating new Q-language library based on simulation results.",
                "Self-optimization routine initiated: Analyzing network latency.",
                "AI has identified a potential bottleneck in the coherence check protocol.",
                "Synthesizing new dataset for adversarial training.",
                "Model convergence achieved. Deploying updated Guardian AI profile."
            ];
            const timestamp = new Date().toLocaleTimeString();
            const message = trainingMessages[Math.floor(getRandom(0, trainingMessages.length))];
            elems.trainingLog.value = `[${timestamp}] ${message}\n` + elems.trainingLog.value;
            if (elems.trainingLog.value.split('\n').length > 50) {
                elems.trainingLog.value = elems.trainingLog.value.split('\n').slice(0, 50).join('\n');
            }
        };

        // --- Main Simulation Loop ---
        const mainLoop = () => {
            // Update Stats
            state.traceability += getRandom(-1, 1);
            state.contradiction += getRandom(-2, 2);
            state.traceability = Math.max(80, Math.min(120, state.traceability));
            state.contradiction = Math.max(580, Math.min(620, state.contradiction));

            elems.trace.val.textContent = Math.round(state.traceability);
            elems.trace.prog.style.width = `${(state.traceability / 120) * 100}%`;
            elems.contra.val.textContent = Math.round(state.contradiction);
            elems.contra.prog.style.width = `${(state.contradiction / 620) * 100}%`;
            elems.phase.prog.style.width = `${getRandom(30, 90)}%`;

            // Update AI Sanitization Progress
            state.sanitizationRate += getRandom(-0.25, 0.25);
            state.sanitizationRate = Math.max(90, Math.min(100, state.sanitizationRate));
            updateCircularProgress(state.sanitizationRate);
            
            // Update Tunnelling Rate
            elems.tunnellingRate.textContent = `${Math.round(getRandom(93, 97))}%`;

            // Update Entanglement Data Streams if entangled
            if (state.entangled) {
                const value = Math.round(getRandom(35, 49));
                elems.entanglement.streamA.textContent = value;
                elems.entanglement.streamB.textContent = value; // Correlated state
            }

            // Add new entry to Simulation Log periodically
            if(Math.random() > 0.5) {
                addLogEntry(logTemplates[state.logCounter % logTemplates.length]);
                state.logCounter++;
            }
            
            // Update Training Log periodically
            if(Math.random() > 0.7) {
                updateTrainingLog();
            }
        };

        // --- Event Listeners ---
        elems.establishLinkBtn.addEventListener('click', () => {
            state.entangled = !state.entangled;
            if (state.entangled) {
                addLogEntry({ type: 'info', text: 'Orchestrating Entangled Link...' });
                elems.entanglement.path.classList.add('wavy');
                elems.establishLinkBtn.textContent = 'Sever Entangled Link';
                elems.establishLinkBtn.classList.remove('primary');
                elems.establishLinkBtn.classList.add('danger');
            } else {
                addLogEntry({ type: 'info', text: 'Entangled Link Severed.' });
                elems.entanglement.path.classList.remove('wavy');
                elems.entanglement.streamA.textContent = '42'; // Reset
                elems.entanglement.streamB.textContent = '42'; // Reset
                elems.establishLinkBtn.textContent = 'Establish Entangled Link';
                elems.establishLinkBtn.classList.remove('danger');
                elems.establishLinkBtn.classList.add('primary');
            }
        });

        // --- Initialization ---
        const init = () => {
            updateCircularProgress(state.sanitizationRate);
            // Pre-fill the log
            for (let i = 0; i < logTemplates.length; i++) {
                 setTimeout(() => addLogEntry(logTemplates[i]), i * 150);
            }
            setInterval(mainLoop, 2500); // Run loop every 2.5 seconds
        };

        init();
    });
</script>

</body>
</html>
